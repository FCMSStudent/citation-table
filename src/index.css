@import url("https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@400;500;600;700&family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap");
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ── Liquid Glass Design System ──
   Aesthetic: Apple Liquid Glass – translucent frosted layers,
   luminous tints, diffused depth, soft spectral highlights.
*/

@layer base {
  :root {
    /* ── Surfaces ── */
    --background: 220 16% 96%;
    --foreground: 220 20% 14%;

    --card: 0 0% 100% / 72%;
    --card-foreground: 220 20% 14%;

    --popover: 0 0% 100% / 80%;
    --popover-foreground: 220 20% 14%;

    /* ── Primary – soft blue-violet tint ── */
    --primary: 215 90% 56%;
    --primary-foreground: 0 0% 100%;

    /* ── Secondary – frosted neutral ── */
    --secondary: 220 14% 92%;
    --secondary-foreground: 220 20% 24%;

    /* ── Muted – whisper-soft gray ── */
    --muted: 220 14% 94%;
    --muted-foreground: 220 10% 50%;

    /* ── Accent – spectral violet ── */
    --accent: 260 60% 62%;
    --accent-foreground: 0 0% 100%;

    /* ── Destructive ── */
    --destructive: 0 72% 58%;
    --destructive-foreground: 0 0% 100%;

    /* ── UI chrome ── */
    --border: 220 14% 90%;
    --input: 220 14% 90%;
    --ring: 215 90% 56%;
    --radius: 0.75rem;

    /* ── Table ── */
    --table-header: 220 16% 96%;
    --table-row-hover: 215 40% 96%;
    --table-border: 220 14% 90%;

    /* ── Citation ── */
    --citation-bg: 215 60% 96%;
    --citation-border: 215 70% 72%;

    /* ── Status ── */
    --success: 152 60% 44%;
    --warning: 38 92% 55%;
    --info: 215 90% 56%;
    --status-success: var(--success);
    --status-warning: var(--warning);
    --status-info: var(--info);
    --status-danger: var(--destructive);

    /* ── Semantic typography scale ── */
    --type-xs: 0.75rem;
    --type-sm: 0.875rem;
    --type-md: 1rem;
    --type-lg: 1.125rem;
    --type-xl: 1.25rem;

    /* ── Semantic spacing scale ── */
    --space-1: 0.25rem;
    --space-2: 0.5rem;
    --space-3: 0.75rem;
    --space-4: 1rem;
    --space-5: 1.25rem;
    --space-6: 1.5rem;

    /* ── Liquid Glass Gradients ── */
    --gradient-primary: linear-gradient(135deg, hsl(215 90% 62% / 0.8) 0%, hsl(260 60% 62% / 0.6) 100%);
    --gradient-accent: linear-gradient(135deg, hsl(260 60% 68% / 0.7) 0%, hsl(310 50% 62% / 0.5) 100%);
    --gradient-success: linear-gradient(135deg, hsl(172 60% 50% / 0.7) 0%, hsl(152 60% 44% / 0.6) 100%);
    --gradient-warm: linear-gradient(135deg, hsl(20 80% 60% / 0.6) 0%, hsl(40 90% 60% / 0.5) 100%);
    --gradient-cool: linear-gradient(135deg, hsl(200 80% 58% / 0.7) 0%, hsl(240 50% 50% / 0.5) 100%);
    --gradient-glass: linear-gradient(135deg, hsl(0 0% 100% / 0.5) 0%, hsl(0 0% 100% / 0.2) 100%);

    /* ── Glass surface ── */
    --glass-bg: hsl(0 0% 100% / 0.55);
    --glass-border: hsl(0 0% 100% / 0.6);
    --glass-blur: 20px;
    --glass-shadow: 0 8px 32px hsl(215 40% 50% / 0.08), 0 2px 8px hsl(215 40% 50% / 0.04);
    --glass-highlight: inset 0 1px 0 hsl(0 0% 100% / 0.6);

    /* ── Sidebar ── */
    --sidebar-background: 220 16% 97%;
    --sidebar-foreground: 220 20% 14%;
    --sidebar-primary: 215 90% 56%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 220 14% 94%;
    --sidebar-accent-foreground: 220 20% 24%;
    --sidebar-border: 220 14% 90%;
    --sidebar-ring: 215 90% 56%;
    --sidebar: 220 16% 97%;

    /* ── Chart ── */
    --chart-1: 215 90% 56%;
    --chart-2: 172 50% 50%;
    --chart-3: 260 50% 58%;
    --chart-4: 38 80% 55%;
    --chart-5: 340 60% 58%;

    /* ── Typography ── */
    --font-sans: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    --font-serif: Georgia, Cambria, "Times New Roman", Times, serif;
    --font-mono: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;

    /* ── Shadows – diffused, luminous ── */
    --shadow-2xs: 0 1px 2px hsl(215 30% 50% / 0.04);
    --shadow-xs: 0 1px 3px hsl(215 30% 50% / 0.06);
    --shadow-sm: 0 2px 6px hsl(215 30% 50% / 0.06), 0 1px 2px hsl(215 30% 50% / 0.04);
    --shadow: 0 4px 12px hsl(215 30% 50% / 0.06), 0 1px 4px hsl(215 30% 50% / 0.04);
    --shadow-md: 0 6px 20px hsl(215 30% 50% / 0.08), 0 2px 6px hsl(215 30% 50% / 0.04);
    --shadow-lg: 0 12px 40px hsl(215 30% 50% / 0.1), 0 4px 12px hsl(215 30% 50% / 0.05);
    --shadow-xl: 0 20px 60px hsl(215 30% 50% / 0.12), 0 8px 20px hsl(215 30% 50% / 0.06);
    --shadow-2xl: 0 32px 80px hsl(215 30% 50% / 0.16);
    --tracking-normal: 0em;
    --spacing: 0.25rem;
  }

  .dark {
    /* ── Surfaces ── */
    --background: 225 20% 8%;
    --foreground: 220 10% 92%;

    --card: 225 18% 14% / 65%;
    --card-foreground: 220 10% 92%;

    --popover: 225 18% 14% / 80%;
    --popover-foreground: 220 10% 92%;

    /* ── Primary ── */
    --primary: 215 80% 64%;
    --primary-foreground: 225 20% 8%;

    /* ── Secondary ── */
    --secondary: 225 14% 18%;
    --secondary-foreground: 220 10% 85%;

    /* ── Muted ── */
    --muted: 225 14% 18%;
    --muted-foreground: 220 10% 55%;

    /* ── Accent ── */
    --accent: 260 50% 68%;
    --accent-foreground: 225 20% 8%;

    /* ── Destructive ── */
    --destructive: 0 65% 55%;
    --destructive-foreground: 220 10% 92%;

    /* ── UI chrome ── */
    --border: 0 0% 100% / 8%;
    --input: 0 0% 100% / 10%;
    --ring: 215 80% 64%;

    /* ── Table ── */
    --table-header: 225 18% 12%;
    --table-row-hover: 225 18% 14%;
    --table-border: 0 0% 100% / 8%;

    /* ── Citation ── */
    --citation-bg: 215 40% 14%;
    --citation-border: 215 50% 40%;

    /* ── Glass ── */
    --glass-bg: hsl(225 18% 16% / 0.55);
    --glass-border: hsl(0 0% 100% / 0.1);
    --glass-shadow: 0 8px 32px hsl(0 0% 0% / 0.2), 0 2px 8px hsl(0 0% 0% / 0.1);
    --glass-highlight: inset 0 1px 0 hsl(0 0% 100% / 0.08);
    --status-success: var(--success);
    --status-warning: var(--warning);
    --status-info: var(--info);
    --status-danger: var(--destructive);

    /* ── Sidebar ── */
    --sidebar-background: 225 18% 10%;
    --sidebar-foreground: 220 10% 92%;
    --sidebar-primary: 215 80% 64%;
    --sidebar-primary-foreground: 225 20% 8%;
    --sidebar-accent: 225 14% 18%;
    --sidebar-accent-foreground: 220 10% 85%;
    --sidebar-border: 0 0% 100% / 8%;
    --sidebar-ring: 215 80% 64%;
    --sidebar: 225 18% 10%;

    /* ── Chart ── */
    --chart-1: 215 80% 64%;
    --chart-2: 172 45% 55%;
    --chart-3: 260 45% 65%;
    --chart-4: 38 70% 58%;
    --chart-5: 340 55% 62%;

    /* ── Shadows ── */
    --shadow-2xs: 0 1px 2px hsl(0 0% 0% / 0.1);
    --shadow-xs: 0 1px 3px hsl(0 0% 0% / 0.15);
    --shadow-sm: 0 2px 6px hsl(0 0% 0% / 0.15), 0 1px 2px hsl(0 0% 0% / 0.1);
    --shadow: 0 4px 12px hsl(0 0% 0% / 0.15), 0 1px 4px hsl(0 0% 0% / 0.1);
    --shadow-md: 0 6px 20px hsl(0 0% 0% / 0.2), 0 2px 6px hsl(0 0% 0% / 0.1);
    --shadow-lg: 0 12px 40px hsl(0 0% 0% / 0.25), 0 4px 12px hsl(0 0% 0% / 0.12);
    --shadow-xl: 0 20px 60px hsl(0 0% 0% / 0.3), 0 8px 20px hsl(0 0% 0% / 0.15);
    --shadow-2xl: 0 32px 80px hsl(0 0% 0% / 0.4);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold tracking-tight;
    letter-spacing: -0.02em;
  }
}

@layer components {
  /* ── Liquid Glass Surface ── */
  .glass {
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow), var(--glass-highlight);
  }

  .glass-subtle {
    background: var(--glass-bg);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid var(--glass-border);
  }

  .glass-prominent {
    background: var(--glass-bg);
    backdrop-filter: blur(32px) saturate(1.8);
    -webkit-backdrop-filter: blur(32px) saturate(1.8);
    border: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow), var(--glass-highlight),
      inset 0 0 80px hsl(215 60% 80% / 0.04);
  }

  /* ── Research Input ── */
  .research-input {
    @apply w-full px-5 py-3.5 text-lg rounded-xl;
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: 1px solid var(--glass-border);
    box-shadow: var(--glass-highlight);
    @apply focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-primary/30;
    @apply placeholder:text-muted-foreground transition-all duration-300;
  }

  .research-input:focus {
    box-shadow: var(--glass-shadow), 0 0 0 4px hsl(215 90% 56% / 0.1);
  }

  /* ── Results Table ── */
  .results-table {
    @apply w-full border-collapse;
  }

  .results-table th {
    @apply px-4 py-3 text-left text-sm font-medium;
    @apply bg-[hsl(var(--table-header))] border-b border-[hsl(var(--table-border))];
    @apply text-muted-foreground uppercase tracking-wider text-xs;
  }

  .results-table td {
    @apply px-4 py-3 text-sm border-b border-[hsl(var(--table-border))];
    @apply text-foreground;
  }

  .results-table tr:hover td {
    @apply bg-[hsl(var(--table-row-hover))];
  }

  /* ── Citation Panel ── */
  .citation-panel {
    @apply p-4 rounded-lg text-sm leading-relaxed;
    background: hsl(var(--citation-bg));
    border-left: 3px solid hsl(var(--citation-border));
  }

  /* ── Study Badges ── */
  .study-badge {
    @apply inline-flex items-center px-2.5 py-0.5 text-xs font-medium rounded-full;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }

  .study-badge-rct {
    @apply bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 border border-emerald-500/20;
  }

  .study-badge-cohort {
    @apply bg-blue-500/10 text-blue-700 dark:text-blue-300 border border-blue-500/20;
  }

  .study-badge-review {
    @apply bg-purple-500/10 text-purple-700 dark:text-purple-300 border border-purple-500/20;
  }

  .study-badge-cross-sectional {
    @apply bg-amber-500/10 text-amber-700 dark:text-amber-300 border border-amber-500/20;
  }

  .study-badge-unknown {
    @apply bg-muted text-muted-foreground border border-border;
  }

  /* ── Skeleton ── */
  .skeleton-row {
    @apply animate-pulse;
  }

  .skeleton-cell {
    @apply h-4 bg-muted rounded-lg;
  }

  .null-value {
    @apply text-muted-foreground italic;
  }
}

@layer utilities {
  .transition-expand {
    transition: max-height 0.3s ease-out, opacity 0.2s ease-out;
  }

  .focus-ring {
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-ring/50 focus-visible:ring-offset-2;
  }

  /* Gradient backgrounds */
  .bg-gradient-primary {
    background: var(--gradient-primary);
  }

  .bg-gradient-accent {
    background: var(--gradient-accent);
  }

  .bg-gradient-success {
    background: var(--gradient-success);
  }

  .bg-gradient-warm {
    background: var(--gradient-warm);
  }

  .bg-gradient-cool {
    background: var(--gradient-cool);
  }

  .bg-gradient-glass {
    background: var(--gradient-glass);
  }
}

/* ── Keyframe Animations ── */
@keyframes shimmer {
  0% { background-position: -1000px 0; }
  100% { background-position: 1000px 0; }
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.97); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 0 0 hsl(215 90% 56% / 0.3); }
  50% { box-shadow: 0 0 24px 6px hsl(215 90% 56% / 0.12); }
}

@keyframes gradient-shift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

@keyframes glass-refract {
  0%, 100% { backdrop-filter: blur(20px) saturate(1.4); }
  50% { backdrop-filter: blur(24px) saturate(1.6); }
}

.animate-shimmer {
  animation: shimmer 2.5s infinite linear;
  background: linear-gradient(
    to right,
    transparent 0%,
    hsl(0 0% 100% / 0.3) 50%,
    transparent 100%
  );
  background-size: 1000px 100%;
}

.animate-fadeInUp {
  animation: fadeInUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

.animate-scaleIn {
  animation: scaleIn 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.animate-pulse-glow {
  animation: pulse-glow 2.5s infinite;
}

.animate-gradient-shift {
  animation: gradient-shift 4s ease infinite;
  background-size: 200% 200%;
}

.animate-glass-refract {
  animation: glass-refract 6s ease-in-out infinite;
}

/* ── Reduced Motion ── */
@media (prefers-reduced-motion: reduce) {
  .animate-shimmer,
  .animate-fadeInUp,
  .animate-scaleIn,
  .animate-pulse-glow,
  .animate-gradient-shift,
  .animate-glass-refract {
    animation: none;
  }

  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
